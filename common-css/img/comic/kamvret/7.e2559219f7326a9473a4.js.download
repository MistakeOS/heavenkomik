(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{286:function(e,t,n){"use strict";n.r(t);var o=n(6),r=n.n(o),a=n(0),i=n.n(a),c=n(3),l=(n(1),n(7)),s=n(51),u=n(16),m=n.n(u),f=n(2),p=n(5);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x(){var e=E(["\n    max-width: 360px;\n    border-radius: 0.75rem;\n    overflow: hidden;\n  "]);return x=function(){return e},e}function w(){var e=E(["\n  background: ",";\n  overflow: visible;\n  padding: 1.5rem;\n  max-width: 90%;\n  position: relative;\n  ",";\n  .forbidden-dialog {\n    h3 {\n      font-size: ",";\n      font-weight: bold;\n      color: ",";\n    }\n    p {\n    }\n    .button-group {\n      display: flex;\n      justify-content: flex-end;\n      align-items: center;\n      .btn {\n        cursor: pointer;\n        padding: 0 .75rem;\n        line-height: 32px;\n        outline: none !important;\n        font-size: ",";\n        color: ",";\n        font-weight: bold;\n        transition: ",";\n        &:hover, &:focus {\n          opacity: .6;\n        }\n        + .btn {\n          margin-left: 1.5rem;\n        }\n        &.btn-go-plus {\n          color: ",";\n        }\n      }\n    }\n  }\n  .close-button {\n    position: absolute;\n    top: 0;\n    right: 0;\n    width: 24px;\n    height: 24px;\n    line-height: 24px;\n    text-align: center;\n    z-index: 3;\n    color: ",";\n    transition: ",";\n    cursor: pointer;\n    .ci {\n      font-size: ",";\n      width: ",";\n      height: ",";\n      line-height: ",";\n    }\n    &:hover, &:focus {\n      color: ",";\n    }\n  }\n"]);return w=function(){return e},e}function E(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var O=m.a.styled(w(),function(e){return e.theme.white},f.b.tablet(x()),function(e){return e.theme.m},function(e){return e.theme.body},function(e){return e.theme.m},function(e){return e.theme.copy},function(e){return e.theme.transition},function(e){return e.theme.orange},function(e){return e.theme.lightCopy},function(e){return e.theme.transition},function(e){return e.theme.xs},function(e){return e.theme.xs},function(e){return e.theme.xs},function(e){return e.theme.xs},function(e){return e.theme.lightWhite}),_=c.default.div.withConfig({displayName:"ForbiddenDialog__ForbiddenModalStyle",componentId:"sc-1t5dt07-0"})([".forbidden-access{position:absolute;top:0;left:0;right:0;bottom:0;z-index:8;opacity:0;display:block;cursor:pointer;}"]),S=function(e){function t(){var e,n,o,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return o=this,r=(e=h(t)).call.apply(e,[this].concat(i)),n=!r||"object"!==d(r)&&"function"!=typeof r?g(o):r,v(g(g(n)),"state",{isOpen:!1,originUrl:"https://www.ciayo.com"}),v(g(g(n)),"openModal",function(){n.setState({isOpen:!0})}),v(g(g(n)),"closeModal",function(){n.setState({isOpen:!1})}),n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(t,a["Component"]),n=t,(o=[{key:"componentDidMount",value:function(){this.setState({originUrl:window?window.location.origin:"https://www.ciayo.com"})}},{key:"render",value:function(){var e=this.state,t=e.isOpen;e.originUrl,this.props.router;return i.a.createElement(_,null,i.a.createElement("div",{className:"forbidden-access",onClick:this.openModal,role:"presentation"}),i.a.createElement(O,{isOpen:t,onBackgroundClick:this.closeModal,onEscapeKeydown:this.closeModal},i.a.createElement("div",{className:"forbidden-dialog"},i.a.createElement("h3",null,"Nope, Sorry."),i.a.createElement("p",null,"You have to go Plus+ before you can do that."),i.a.createElement("div",{className:"button-group"},i.a.createElement("button",{className:"btn-close btn",type:"button",onClick:this.closeModal},"Close"),i.a.createElement(p.a,{to:"/plus/go"},i.a.createElement("a",{className:"btn-go-plus btn"},"Go Plus+")))),i.a.createElement("button",{className:"close-button",type:"button",onClick:this.closeModal},i.a.createElement("span",{className:"ci ci-close"}))))}}])&&b(n.prototype,o),r&&b(n,r),t}(),N=Object(l.withRouter)(S),j=n(8),k=n(10);function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e,t,n,o,r,a,i){try{var c=e[a](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(o,r)}function z(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function F(e){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function M(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function B(){var e=J(["\n      margin: 0;\n    "]);return B=function(){return e},e}function R(){var e=J(["\n          display: block;\n        "]);return R=function(){return e},e}function I(){var e=J(["\n          margin-right: 0.375rem;\n        "]);return I=function(){return e},e}function D(){var e=J(["\n        width: auto;\n        height: auto;\n        line-height: 1.5;\n      "]);return D=function(){return e},e}function L(){var e=J(["\n      display: block;\n    "]);return L=function(){return e},e}function U(){var e=J(["\n      display: block;\n    "]);return U=function(){return e},e}function W(){var e=J(["\n    padding: 0.75rem;\n    border: 1px solid ",";\n    border-radius: 12px;\n  "]);return W=function(){return e},e}function J(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var q=c.default.div.withConfig({displayName:"CommentBox__CommentBoxStyle",componentId:"sc-1jt66bf-0"})(["position:relative;padding:0.75rem 0;display:flex;",";&.reply-box-style{border:none;padding:0.75rem;border-radius:0;border-top:1px solid ",";}.comment-box-avatar{display:none;width:80px;margin-right:1.5rem;position:relative;img{&.comment-box-avatar-img{width:80px;border-radius:50rem;overflow:hidden;transform:scale(0.8);transform-origin:50% 50%;}&.comment-box-avatar-border{width:80px;position:absolute;z-index:5;top:0;left:0;}}",";}.comment-box-content{flex:1;}form{display:flex;width:100%;align-items:flex-start;",";}.comment-box-submit{display:flex;justify-content:flex-end;text-align:right;.button{text-transform:uppercase;font-weight:600;font-size:",";display:flex;align-items:center;width:48px;height:48px;line-height:48px;text-align:center;justify-content:center;margin-bottom:0;",";.ci{font-size:",";width:",";height:",";line-height:",";",";}.text{display:none;",";}}}.comment-box-field{flex:1;margin-right:1.5rem;",";label{position:relative;padding-top:1.5rem;.comment-label{position:absolute;top:1.5rem;font-weight:600;font-size:",";transition:",";height:1.5rem;line-height:1.5rem;}.comment-length-count{display:block;text-align:right;font-size:",";margin-bottom:0.375rem;opacity:0;transition:",";&.active{opacity:1;}}textarea{min-height:1.5rem;line-height:1.5;margin:0;border:none;background:none;padding:0;border-bottom:2px solid ",";max-height:9rem;height:1.5rem;&:focus,&.is-filled{border-bottom-color:",";~ .comment-label{top:0;font-size:",";color:",";}}}}}"],f.b.desktop(W(),function(e){return e.theme.border}),function(e){return e.theme.border},f.b.desktop(U()),f.b.tablet(L()),function(e){return e.theme.s},f.b.tablet(D()),function(e){return e.theme.m},function(e){return e.theme.m},function(e){return e.theme.m},function(e){return e.theme.m},f.b.tablet(I()),f.b.tablet(R()),f.b.tablet(B()),function(e){return e.theme.m},function(e){return e.theme.transition},function(e){return e.theme.xs},function(e){return e.theme.transition},function(e){return e.theme.border},function(e){return e.theme.orange},function(e){return e.theme.xs},function(e){return e.theme.orange}),G=function(e){function t(){var e,n,o,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,c=new Array(i),l=0;l<i;l++)c[l]=arguments[l];return o=this,a=(e=F(t)).call.apply(e,[this].concat(c)),n=!a||"object"!==C(a)&&"function"!=typeof a?M(o):a,A(M(M(n)),"state",{isLoading:!1,isError:!1,commentText:"",isFilled:!1,isFocused:!1,user:null}),A(M(M(n)),"onTypeComment",function(e){var t=e.target;t.style.height="24px";var o=t.scrollHeight;t.style.height="".concat(o,"px");var r=e.target.value,a=!1,i=r.charAt(r.length-1).toString(),c=r.charAt(r.length-2).toString(),l=r.charAt(r.length-3).toString();"\n"===i&&"\n"===c&&"\n"===l&&(r=r.substring(0,r.length-1)),r.length>0&&(a=!0),n.setState({commentText:r,isFilled:a})}),A(M(M(n)),"onFocus",function(){n.setState({isFocused:!0})}),A(M(M(n)),"onBlur",function(){n.setState({isFocused:!1})}),A(M(M(n)),"sendComment",function(){var e,t=(e=r.a.mark(function e(t,o,a,i){var c,l,s,u,m,f,p,d,b;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),c=n.state.commentText,l=n.props,s=l.appendComment,u=l.isReply,m=l.parentId,n.setState({isLoading:!0}),f=u?"user,parent":"user",(p=new FormData).append("comment",c),u&&p.append("parent_id",m),d=n.props.challenge,b={_comicName:a,_chapterName:void 0!==d&&d?"detail":i,commentWith:f,_lang:o},e.next=13,Object(j.cb)(b,p).then(function(e){if(e.data.c.data.length>0){var t=new Array(e.data.c.data);s(t)}else if(e.data.c.data.id){var o=new Array(e.data.c.data);s(o)}else if(e.data.c.data&&e.data.c.data.id){var r=new Array(e.data.c.data);s(r)}else n.setState({isError:!0})}).catch(function(e){console.log(e),n.setState({isError:!0})}).finally(function(){n.setState({isLoading:!1,commentText:"",isFilled:!1})});case 13:case"end":return e.stop()}},e,this)}),function(){var t=this,n=arguments;return new Promise(function(o,r){var a=e.apply(t,n);function i(e){P(a,o,r,i,c,"next",e)}function c(e){P(a,o,r,i,c,"throw",e)}i(void 0)})});return function(e,n,o,r){return t.apply(this,arguments)}}()),n}var n,o,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}(t,a["Component"]),n=t,(o=[{key:"componentDidMount",value:function(){var e=this.props,t=e.parentId,n=e.isReply;document.getElementById("mycomment-".concat(n?t:"0")).focus(),this.setState({user:Object(k.c)()})}},{key:"render",value:function(){var e=this,t=this.state,n=t.commentText,o=t.isFilled,r=t.isLoading,a=t.isError,c=t.isFocused,l=t.user,u=this.props,m=u.router,f=u.isReply,p=void 0===f?null:f,d=u.parentId,b=void 0===d?null:d,h=u.oneshot,y=void 0!==h&&h,g=(u.challenge,u.status),v=void 0===g?"normal":g,x=u.purchased,w=void 0!==x&&x,E=m.query,O=E._lang,_=E._comicName,S=E._chapterName,j=y?"detail":S;return i.a.createElement(q,{className:"".concat(p?"reply-box-style":"")},i.a.createElement("div",{className:"comment-box-avatar"},i.a.createElement("img",{src:l?l.avatar:"https://media.ciayo.com/users/ic_empty_avatar.png",alt:l?l.display_name:"User",className:"comment-box-avatar-img"}),l&&l.avatar_border&&i.a.createElement("img",{src:l.avatar_border,alt:l.display_name,className:"comment-box-avatar-border"})),i.a.createElement("div",{className:"comment-box-content"},i.a.createElement("form",{onSubmit:function(t){return e.sendComment(t,O,_,j)}},i.a.createElement("div",{className:"comment-box-field ".concat(o?"is-filled":"")},i.a.createElement("label",{htmlFor:"mycomment-".concat(p?b:"0")},i.a.createElement("textarea",{name:"mycomment-".concat(p?"reply":"comment"),id:"mycomment-".concat(p?b:"0"),maxLength:"300",onChange:function(t){return e.onTypeComment(t)},onFocus:this.onFocus,onBlur:this.onBlur,value:n,className:"comment-textarea ".concat(o?"is-filled":""),disabled:!(!r&&l)&&"disabled"}),p?i.a.createElement("span",{className:"comment-label"},"Write a reply.."):i.a.createElement("span",{className:"comment-label"},"Write a comment.."),i.a.createElement("span",{className:"comment-length-count ".concat(c||o?"active":"")},n.length,"/300"))),i.a.createElement("div",{className:"comment-box-submit"},r||!o||a?i.a.createElement("button",{type:"submit",className:"button btn-submit secondary",disabled:"disabled"},i.a.createElement("span",{className:"ci ".concat(r?"ci-spin ci-loader":"ci-send")}),i.a.createElement("span",{className:"text"},"Send")):i.a.createElement("button",{type:"submit",className:"button btn-submit"},i.a.createElement("span",{className:"ci ci-send"}),i.a.createElement("span",{className:"text"},"Send"))))),!l&&i.a.createElement(s.a,null),l&&!l.is_premium&&"locked"===v&&!w&&i.a.createElement(N,null))}}])&&z(n.prototype,o),c&&z(n,c),t}();t.default=Object(l.withRouter)(G)}}]);